import domlib from"https://cdn.jsdelivr.net/gh/SaulDoesCode/kurshok/dist/domlib.js";Array.prototype.randomize=function(){let t,e=[],o=this,a=o.length;for(;e.length!=a;)e.push(o[t=Math.floor(Math.random()*o.length)]),o.splice(t,1);return o.splice(0,o.length,...e),o},domlib.runAsync((async t=>{const{queryAsync:e,query:o,render:a}=domlib,{div:i,article:s,textarea:r,input:n,a:l,p:d,button:c,br:m,hr:h,h1:p,h4:u,section:b,span:g,header:x}=domlib.domfn,y=domlib.emitter({toasts:new Set}),f=(t,e)=>{for(const a of[...(t=o(t)).children].randomize())e&&!e(a)||(a.remove(),t.appendChild(a))},k=async t=>(await(await fetch(t)).text()).trim(),w="https://cdn.jsdelivr.net/gh/SaulDoesCode/",v=w+"resources/",z=(await k(v+"expressions.txt")).split("\n").map((t=>t.trim())).filter((t=>""!=t)).randomize(),C=t=>e=>e.classList.contains(t),j=t=>f(T,C("small-idea")),A=t=>f($,C("thought")),S=t=>{return(e=f,(...t)=>(...o)=>(e(...t),e(...o)))(".doodle-links")(".links",(t=>"A"==t.tagName));var e},$=b.thoughts({$pre:"main",ondblclick(){A()}},x("expressions"),i.spacer,z.map((t=>d.thought(t)))),T=b.short_ideas({$pre:"main",ondblclick(){j()}},i.spacer,x("short ideas"),m,i.spacer),q=(await k(v+"short-ideas.txt")).split(".").map((t=>t.trim())).filter((t=>t.length>0)).randomize().map((t=>{const[e,o]=t.split(":");return s.small_idea(x(e),g(o))})),D=y.toast=y.emit.toast,M="experimental",_=t=>"#"!=t[0]?"#"+t:t,E=t=>{t.remove(),y.toasts.delete(t),clearTimeout(t.to)};onkeyup=t=>((t,e,...o)=>t===e&&(e=null,o.forEach((t=>e=t(e))),e))(t.key,"r",j,A,S),document.onpointerdown=async({target:t})=>{t.hasAttribute("copyable")&&navigator.clipboard&&window.isSecureContext&&(await navigator.clipboard.writeText(t.textContent.trim()),D("Copied to clipboard"))},y.on.toast((t=>y.toasts.add(i.toast({$:"body",css:{top:`calc(1vh + 1.5cm * ${y.toasts.size})`,zIndex:0},onclick(t,e){E(e)}},t,(t=>{t.to=setTimeout((e=>E(t)),5500)}))))),(await e(".breathing-circle")).onclick=t=>{return e=M,location.hash=_(e);var e},(onhashchange=t=>_(M)===location.hash&&y.emit.xpm())(),a(q,T),D("loaded; pressing r randomizes things"),S(),y.once.xpm((async()=>(await import("o"==location.hostname[1]?"./experimental.js":w+"kurshok/dist/experimental.js")).default(y,domlib)))}));