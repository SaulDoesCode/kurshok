import domlib from"https://cdn.jsdelivr.net/gh/SaulDoesCode/kurshok/dist/domlib.js";Array.prototype.randomize=function(){let t,e=[],o=this,a=o.length;for(;e.length!=a;)e.push(o[t=Math.floor(Math.random()*o.length)]),o.splice(t,1);return o.splice(0,o.length,...e),o},domlib.run((async t=>{const{queryAsync:e,query:o,render:a,domfn:i}=domlib,{div:s,article:n,p:r,br:d,section:l,span:c,header:p}=i,m=domlib.emitter({toasts:new Set}),h=(t,e)=>{for(const a of[...(t=o(t)).children].randomize())e&&!e(a)||(a.remove(),t.appendChild(a))},u=m.ftxt=async t=>(await(await fetch(t)).text()).trim(),x=m.cdnRoot="https://cdn.jsdelivr.net/gh/SaulDoesCode/",b=x+"resources/",g=(await u(b+"expressions.txt")).split("\n").map((t=>t.trim())).filter((t=>""!=t)).randomize(),f=t=>e=>e.classList.contains(t),w=t=>h(z,f("idea")),y=t=>h(v,f("exp")),k=t=>{return(e=h,(...t)=>(...o)=>(e(...t),e(...o)))(".doodle-links")(".links",(t=>"A"==t.tagName));var e},v=l.expressions({$pre:"main",ondblclick(){y()}},p("expressions"),s.spacer,g.map((t=>r.exp(t)))),z=l.short_ideas({$pre:"main",ondblclick(){w()}},s.spacer,p("short ideas"),d,s.spacer),C=(await u(b+"short-ideas.txt")).split(".").map((t=>t.trim())).filter((t=>t.length>0)).randomize().map((t=>n.idea(((t,e,[o,a])=>[t(o),e(a)])(p,c,t.split(":"))))),j="experimental",A=t=>"#"!=t[0]?"#"+t:t,S=t=>{t.remove(),m.toasts.delete(t),clearTimeout(t.to)};document.onpointerdown=async({target:t})=>{t.hasAttribute("copyable")&&navigator.clipboard&&window.isSecureContext&&(await navigator.clipboard.writeText(t.textContent.trim()),m.emit.toast("Copied to clipboard"))},m.on.toast((t=>m.toasts.add(s.toast({$:"body",css:{top:`calc(1vh + 1.5cm * ${m.toasts.size})`,zIndex:0},onclick(t,e){S(e)}},t,(t=>{t.to=setTimeout((e=>S(t)),5500)}))))),(await e(".breathing-circle")).onpointerdown=t=>{return e=j,location.hash=A(e);var e},a(C,z),m.emit.toast("loaded; pressing r randomizes things"),k(),m.once.xpm((async()=>(await import((m.isLH="c"==location.hostname[2]?"./":x+"kurshok/dist/")+"experimental.js")).default(m,domlib))),(onhashchange=t=>A(j)===location.hash&&m.emit.xpm())(),onkeyup=t=>((t,e,...o)=>t===e&&(e=null,o.forEach((t=>e=t(e))),e))(t.key,"r",w,y,k)}));