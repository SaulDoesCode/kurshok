import domlib from"./domlib.js";Array.prototype.randomize=function(){let t,e=[],o=this,a=o.length;for(;e.length!=a;)e.push(o[t=Math.floor(Math.random()*o.length)]),o.splice(t,1);return o.splice(0,o.length,...e),o},domlib.run((async t=>{const{queryAsync:e,query:o,render:a,domfn:i}=domlib,{div:s,article:n,p:r,br:l,section:d,span:c,header:m}=i,p=domlib.emitter({toasts:new Set}),h=(t,e)=>{for(const a of[...(t=o(t)).children].randomize())e&&!e(a)||(a.remove(),t.appendChild(a))},u=p.ftxt=async t=>(await(await fetch(t)).text()).trim(),g=p.cdnRoot="https://cdn.jsdelivr.net/gh/SaulDoesCode/",b=g+"resources/",x=(await u(b+"expressions.txt")).split("\n").map((t=>t.trim())).filter((t=>""!=t)).randomize(),f=t=>e=>e.classList.contains(t),w=t=>h(z,f("small-idea")),y=t=>h(v,f("thought")),k=t=>{return(e=h,(...t)=>(...o)=>(e(...t),e(...o)))(".doodle-links")(".links",(t=>"A"==t.tagName));var e},v=d.thoughts({$pre:"main",ondblclick(){y()}},m("expressions"),s.spacer,x.map((t=>r.thought(t)))),z=d.short_ideas({$pre:"main",ondblclick(){w()}},s.spacer,m("short ideas"),l,s.spacer),C=(await u(b+"short-ideas.txt")).split(".").map((t=>t.trim())).filter((t=>t.length>0)).randomize().map((t=>n.small_idea(((t,e,[o,a])=>[t(o),e(a)])(m,c,t.split(":"))))),A="experimental",$=t=>"#"!=t[0]?"#"+t:t,j=t=>{t.remove(),p.toasts.delete(t),clearTimeout(t.to)};onkeyup=t=>((t,e,...o)=>t===e&&(e=null,o.forEach((t=>e=t(e))),e))(t.key,"r",w,y,k),document.onpointerdown=async({target:t})=>{t.hasAttribute("copyable")&&navigator.clipboard&&window.isSecureContext&&(await navigator.clipboard.writeText(t.textContent.trim()),p.emit.toast("Copied to clipboard"))},p.on.toast((t=>p.toasts.add(s.toast({$:"body",css:{top:`calc(1vh + 1.5cm * ${p.toasts.size})`,zIndex:0},onclick(t,e){j(e)}},t,(t=>{t.to=setTimeout((e=>j(t)),5500)}))))),(await e(".breathing-circle")).onpointerdown=t=>{return e=A,location.hash=$(e);var e},a(C,z),p.emit.toast("loaded; pressing r randomizes things"),k(),p.once.xpm((async()=>(await import((p.isLH="c"==location.hostname[2]?"./":g+"kurshok/dist/")+"experimental.js")).default(p,domlib))),(onhashchange=t=>$(A)===location.hash&&p.emit.xpm())()}));