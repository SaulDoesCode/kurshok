import domlib from"./domlib.js";const{queryAsync:queryAsync,runAsync:runAsync}=domlib,{div:div,section:section,article:article,textarea:textarea,header:header,br:br,span:span,button:button,form:form,input:input,label:label,ul:ul,li:li,a:a,img:img,p:p,h1:h1}=domlib.domfn,state=domlib.emitter();state.addMessage=(t,e,a)=>{const s=p.message({$:state.messagesEl},span.time(a),span.msg(e));return t&&s.classList.add("me"),s},section.chat({$:"body",css:{margin:"auto auto"}},header("Chat"),state.messagesEl=section.messages(),section.input(state.chatInput=textarea({rows:1,cols:64,onsubmit(t){state.handleSend()},onkeyup(t){"  "==t.key&&(t.preventDefault(),state.handleSend())}}),state.chatInputButton=button({onclick(t){state.handleSend()}},"send"))),state.handleSend=t=>{state.addMessage(!0,state.chatInput.value,state.dt()),state.chatInput.value=""},state.once.dayjs((t=>{const e=[],a=state.dt=(a=0)=>{const s=new Text,n=t().subtract(a,"m");return e.push((()=>s.textContent=n.fromNow())),s};setInterval((()=>e.forEach((t=>t()))),1500),state.addMessage(!1,"Goog night",a(780)),state.addMessage(!0,"night night",a(780)),state.addMessage(!0,"Hello!",a(4)),state.addMessage(!1,"How are you?",a(4)),state.addMessage(!0,"I am fine!",a(3)),state.addMessage(!0,"How are you holding up?",a(2))})),runAsync((()=>{}));